<!-- TMPL_INCLUDE NAME="doc-head-open.inc" --><!-- TMPL_VAR NAME="LibraryName" --> Catalog -- Advanced Search
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<!--TMPL_INCLUDE NAME="masthead_adv.inc" -->
<!--TMPL_INCLUDE NAME="navigation.inc" -->

<!-- CONTENT -->
<div id="main">
<form name="f" method="post" action="/cgi-bin/koha/opac-search.pl">
<h1>Search the Catalog</h1>

			<h3>Results:</h3>
			<p><label for="resultsperpage">Results per page:</label>
			<select name="resultsperpage" id="resultsperpage" size="1">
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
			</select></p>
		<p><label for="orderby">Ordered by:</label>
			<select name="orderby" id="orderby" size="1">
				<option value="biblio.title">Title</option>
				<option value="biblio.author">Author</option>
				<option value="biblioitems.dewey">Dewey</option>
				<option value="biblioitems.publicationyear">Publication Year</option>
				<option value="biblioitems.publishercode">Publisher</option>
			</select>
			<select name="desc_or_asc" size="1">
				<option value="ASC">Ascending</option>
				<option value="DESC">Descending</option>
		</select>
		</p>

<table>
<tr><th scope="row"><label for="keyword">Keyword</label></th><td><input type="hidden" name="op" value="do_search" />
			<input type="hidden" name="nbstatements" value="<!-- TMPL_VAR NAME="nbstatements" -->" />
		<input type="hidden" name="marclist" value="" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="keyword" name="value" /></td></tr>
<tr><th scope="row"><label for="title">Title</label></th><td><input type="hidden" name="marclist" value="biblio.title" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="title" name="value" /><!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('opac-dictionary.pl?marclist=biblio.title&amp;type=intranet&amp;index=1',1)"><strong>...</strong></a><!-- /TMPL_UNLESS --></td></tr>
<tr><th scope="row"><label for="author">Author</label></th><td><input type="hidden" name="marclist" value="biblio.author" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="author" name="value" /><!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('opac-dictionary.pl?marclist=biblio.author&amp;type=intranet&amp;index=2',2)"><strong>...</strong></a><!-- /TMPL_UNLESS --></td></tr>
<tr><th scope="row"><label for="subject">Subject</label></th><td>			
			<input type="hidden" name="marclist" value="bibliosubject.subject" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />  
			<input type="text" id="subject" name="value" size="35" /><!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('opac-dictionary.pl?marclist=bibliosubject.subject&amp;type=intranet&amp;index=3',3)"><strong>...</strong></a><!-- /TMPL_UNLESS --></td></tr>
<tr><th scope="row"><label for="seriestitle">Series title</label></th><td>			
			<input type="hidden" name="marclist" value="biblio.seriestitle" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="seriestitle" name="value" size="35"/></td></tr>

<tr><th scope="row"><label for="itemtype">Format</label></th><td><input type="hidden" name="marclist" value="biblioitems.itemtype" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<!-- TMPL_VAR name="CGIitemtype" --></td></tr>
<tr><th scope="row"><label for="branch">Location</label></th><td><input type="hidden" name="marclist" value="items.homebranch" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />  
				<!-- TMPL_VAR name="CGIbranch" --></td></tr>
</table>			
<p><input type="submit" value="Search" /></p>
<table>
<caption>Other options:</caption>
<tr><th scope="row"><label for="barcode">Barcode</label></th><td>
				<input type="hidden" name="marclist" value="items.barcode" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />
				<input type="text" id="barcode" name="value" size="14" maxlength="14" /></td></tr>
<tr><th scope="row"><label for="dewey">Call Number</label></th><td><input type="hidden" name="marclist" value="biblioitems.dewey" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="start" />
			<input type="text" id="dewey" name="value" /></td></tr>
<tr><th scope="row"><label for="isbn">ISBN</label></th><td><input type="hidden" name="marclist" value="biblioitems.isbn" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="start" />
			<input type="text" id="isbn" name="value" /></td></tr>
<tr><th scope="row"><label for="publisher">Publisher</label></th><td><input type="hidden" name="marclist" value="biblioitems.publishercode" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="publisher" name="value" /></td></tr>
<tr><th scope="row"><label for="pubbetween">Published between</label></th><td><input type="hidden" name="marclist" value="biblioitems.publicationyear" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value=">=" />
			<input type="text" id="pubbetween" name="value" size="6" maxlength="4" /></td></tr>
<tr><th scope="row"><label for="puband">...and</label></th><td><input type="hidden" name="marclist" value="biblioitems.publicationyear" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="<=" />
			<input type="text" id="puband" name="value" size="6" maxlength="4" /></td></tr>
</table>
		<p><input type="submit" value="Search" /></p>
</form>

<!-- Hide from NPL --><div class="content-block">
<h3>Recent acquisitions</h3>
	<form action="/cgi-bin/koha/opac-search.pl">
		<p>
			<!-- TMPL_VAR name="CGIitemtype" --> acquired recently (the most recent being first)
			<input type="hidden" name="marclist" value="biblioitems.itemtype" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<input type="hidden" name="op" value="do_search" />
			<input type="hidden" name="type" value="opac" />
			<input type="hidden" name="orderby" value="biblio.timestamp desc" />
			<input type="submit" value="Search" />
		</p>
	</form>
</div><!-- /Hide from NPL -->
<script type="text/javascript">
function sql_update() {
document.f.sql.value="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
			document.f.sql.value = document.f.sql.value+
										document.f.and_or[i].value + ' (' +
										document.f.excluding[i].value + ' ' +
										document.f.marclist[i].value + ' ' +
										document.f.operator[i].value + ' ' +
										'\''+document.f.value[i].value + '\') ';
		}
	}
}

function AddStatement() {

	document.forms[0].op.value="AddStatement";
	document.f.submit();
}

function PopupSuggestion() {
    var strQuery="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
		    strQuery += " "+document.f.value[i].value;
		}
	}
	newin=window.open("suggest.pl?Q="+strQuery,"Suggestions",'width=500,height=400,toolbar=false,scrollbars=yes');
}

</script>


</div>
<!-- TMPL_INCLUDE NAME="opac-bottom.inc" -->
