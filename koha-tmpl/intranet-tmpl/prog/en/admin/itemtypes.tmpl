<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; System Administration &rsaquo;
<!-- TMPL_IF name="add_form" -->
  <!-- TMPL_IF name="itemtype" -->
Modify item type '<!-- TMPL_VAR name="itemtype" -->'
  <!-- TMPL_ELSE -->
Add item type
  <!-- /TMPL_IF -->
<!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirm" -->
  <!-- TMPL_IF name="total" -->
Cannot Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'
  <!-- TMPL_ELSE -->
Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'?
  <!-- /TMPL_IF -->
<!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirmed" -->
Data Deleted
<!-- /TMPL_IF -->
<!-- TMPL_IF name="else" -->
Item Types Administration
<!-- /TMPL_IF -->
</title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->

<!-- TMPL_INCLUDE NAME="menus.inc" -->
<!-- TMPL_INCLUDE NAME="menu-admin.inc" -->

<!-- TMPL_IF name="add_form" -->

<form action="<!-- TMPL_VAR name="script_name" -->" name="Aform" method="post">
  <feldset>
    <legend>
  <!-- TMPL_IF name="itemtype" -->
      <h3>Modify item type</h3>
  <!-- TMPL_ELSE -->
      <h3>Add item type</h3>
  <!-- /TMPL_IF -->
    </legend>

    <input type="hidden" name="op" value="add_validate" />
    <input type="hidden" name="checked" value="0" />
		
    <table>
  <!-- TMPL_IF name="itemtype" -->
      <tr>
        <th>
          <label for="">Item type</label>
        </th>
        <td>
          <input type="hidden" name="itemtype" value="<!-- TMPL_VAR name="itemtype" -->" />
          <!-- TMPL_VAR name="itemtype" -->
        </td>
      </tr>
  <!-- TMPL_ELSE -->
      <tr>
        <th>
          <label for="itemtype">Item type</label>
        </th>
        <td>
          <input type="text" id="itemtype" name="itemtype" size="10" maxlength="10" onblur="toUC(this)" />
        </td>
      </tr>
  <!-- /TMPL_IF -->
      <tr>
        <th>
          <label for="description">Description</label>
        </th>
	<td>
          <input type="text" id="description" name="description" size="48" maxlength="80"
                value="<!-- TMPL_VAR name="description" escape="HTML" -->" />
        </td>
      </tr>
      <tr>
        <th>Image</th>
        <td>
          <p>
  <!-- TMPL_LOOP NAME="IMAGESLOOP" -->
            <label>
    <!-- TMPL_IF name="checked" -->
              <input type="radio" name="image" value="<!-- TMPL_VAR name="KohaImage" -->" checked="checked" />
    <!-- TMPL_ELSE -->
              <!-- TMPL_IF NAME="KohaImage" --> <!-- to delete the radio button if there is no image after -->
              <input type="radio" name="image" value="<!-- TMPL_VAR name="KohaImage" -->" />
              <!-- /TMPL_IF -->
    <!-- /TMPL_IF -->
        <!-- TMPL_IF NAME="KohaImageSrc" -->
              <img src="<!-- TMPL_VAR name="KohaImageSrc" -->" alt="">
        <!-- TMPL_ELSE -->
              <br />
        <!-- /TMPL_IF -->
            </label>
  <!-- /TMPL_LOOP -->
          </p>
          <hr />
          <p>
            <label>
  <!-- TMPL_IF name="remote_image" -->
            <input type="radio" id="remote_image_check" name="image" value="remoteImage" checked="checked" />
  <!-- TMPL_ELSE -->
            <input type="radio" id="remote_image_check" name="image" value="remoteImage" />
  <!-- /TMPL_IF -->
            remote image
            </label>
            <input type="text"
                   name="remoteImage"
                   size="48"
              maxlength="200"
                  value="<!-- TMPL_VAR name="remote_image" -->"
            onmousedown="document.getElementById('remote_image_check').checked = true;"
            />
            </label>
  <!-- TMPL_IF name="remote_image" -->
            <img src="<!-- TMPL_VAR name="remote_image" -->" />
  <!-- /TMPL_IF -->
          </p>
          <hr />
          <p>
            <label><input type="radio" name="image" value="removeImage" /> remove image</label>
          </p>
        </td>
      </tr>
      <tr>
        <th>
          <label for="notforloan">Not for loan</label>
        </th>
        <td>
            <!-- TMPL_IF name="notforloan" -->
                <input type="checkbox" id="notforloan" name="notforloan" checked="checked" value="1" />
            <!-- TMPL_ELSE -->
                <input type="checkbox" id="notforloan" name="notforloan" value="1" />
            <!-- /TMPL_IF -->
          (if checked, no item of this type can be issued. If not checked, every item of this type can be issued unless notforloan is set for a specific item)
        </td>
      </tr>
      <tr>
        <th>
          <label for="renewalsallowed">Renewals</label>
        </th>
        <td>
          <input type="text" id="renewalsallowed" name="renewalsallowed" size="3" maxlength="3" value="
  <!-- TMPL_IF name="renewalsallowed" -->
          <!-- TMPL_VAR NAME="renewalsallowed" -->
  <!-- /TMPL_IF -->" value="1" /><!-- Display for NPL //<input type="hidden" name="rentalcharge" value="0" /> //Display for NPL -->
        </td>
      </tr>
<!-- Hide from NPL-->
      <tr>
        <th>
          <label for="rentalcharge">Rental charge</label>
        </th>
        <td>
          <input type="text" id="rentalcharge" name="rentalcharge" size="10" value="<!-- TMPL_VAR name="rentalcharge" -->" />
        </td>
      </tr><!--  /Hide from NPL -->
      <tr>
        <th>
          <label for="rentalcharge">Summary</label>
        </th>
        <td><p>Enter a summary that will overwrite the default one in search results lists</p>
          <p><textarea id="summary" name="summary" cols="40" rows="10"><!-- TMPL_VAR NAME="summary" --></textarea></p>
          <p>Example, for a website itemtype : </p>
          <p><b>&lt;a href="[856u]"&gt;open site&lt;/a&gt;</b> will show the link just below the title</p>
        </td>
      </tr>
    </table>

    <p id="action">
      <input type="button" value="Save Changes" onclick="Check(this.form)" />
      <input type="button" value="Cancel" onclick="history.back();" />
    </p>
  </fieldset>
</form>
<!-- /TMPL_IF -->

<!-- TMPL_IF name="delete_confirm" -->
<!-- TMPL_IF name="total" --><div class="error">This record is used <!-- TMPL_VAR name="total" --> times. Deletion is not possible.<!-- /TMPL_IF -->
<div class="table details">	<table>
	<caption><!-- TMPL_IF name="total" -->Cannot Delete Item Type<!-- TMPL_ELSE -->Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'?<!-- /TMPL_IF --></caption>
		<tr>
			<th>Item type</th>
			<td><!-- TMPL_VAR name="itemtype" --></td>
		</tr>

	<tr><th>Description</th><td><!-- TMPL_VAR name="description" --></td></tr>
	<tr><th>Loan length</th><td><!-- TMPL_VAR name="loanlength" --></td></tr>
	<tr><th>Renewals</th><td><!-- TMPL_IF name="renewalsallowed" -->Allowed<!-- TMPL_ELSE -->Not allowed<!-- /TMPL_IF --></td></tr>
<!-- Hide from NPL  --><tr><th>Rental charge</th><td><!-- TMPL_VAR name="rentalcharge" --></td></tr><!-- Hide from NPL --></table>
		<form action="<!-- TMPL_VAR name="script_name" -->" method="post">
		<input type="hidden" name="op" value="delete_confirmed" /><input type="hidden" name="itemtype" value="<!-- TMPL_VAR name="itemtype" -->" /><!-- TMPL_IF name="total" -->
		</form><form action="<!-- TMPL_VAR name="script_name" -->" method="post"><input type="submit" value="OK" /></form>
	<!-- TMPL_ELSE -->
		<input type="submit" value="Delete this Item Type" /></form> <form action="<!-- TMPL_VAR name="script_name" -->" method="post"><input type="submit" value="Do Not Delete" /></form>
	<!-- /TMPL_IF -->

	
<!-- /TMPL_IF -->

<!-- TMPL_IF name="else" -->
<h2>Item Types Administration</h2>
<table>
  <tr>
    <th>image</th>
    <th>Code</th>
    <th>Description</th>
    <th>Not for Loan</th>
    <th>Renewable</th>
    <th>Charge</th>
    <th>Actions</th>
  </tr>
  <!-- TMPL_LOOP name="loop" -->
    <!-- TMPL_IF NAME="toggle" -->
  <tr>
    <!-- TMPL_ELSE -->
  <tr class="highlight">
    <!-- /TMPL_IF -->
    <td><img src="<!-- TMPL_VAR name="imageurl" -->" /></td>
    <td>
      <a href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->">
        <!-- TMPL_VAR name="itemtype" -->
      </a>
    </td>
    <td><!-- TMPL_VAR name="description" --></td>
    <td><!-- TMPL_IF NAME="notforloan" -->Yes<!-- TMPL_ELSE -->&nbsp;<!-- /TMPL_IF --></td>
    <td>
    <!-- TMPL_IF NAME="renewalsallowed" -->
      <!-- TMPL_VAR name="renewalsallowed" --> time(s)
    <!-- TMPL_ELSE -->
      No
    <!-- /TMPL_IF -->
    </td>
    <td>
    <!-- TMPL_UNLESS name="notforloan" -->
      <!-- TMPL_VAR NAME="rentalcharge" -->
    <!-- /TMPL_UNLESS -->
    </td>
    <td>
      <a href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->">Edit</a>
      <a href="<!-- TMPL_VAR name="script_name" -->?op=delete_confirm&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->">Delete</a>
    </td>
  </tr>
  <!-- /TMPL_LOOP -->
</table>

<div class="paginationBar"><!-- TMPL_VAR NAME="pagination_bar" --></div>

<p><a href="<!-- TMPL_VAR name="script_name" -->?op=add_form">Add Item type</a></p>
<!-- /TMPL_IF -->


<script language="javascript" type="text/javascript">

function isNotNull(f,noalert) {
	if (f.value.length ==0) {
		return false;
	}
	return true;
}

function toUC(f) {
	var x=f.value.toUpperCase();
	f.value=x;
	return true;
}

function isNum(v,maybenull) {
var n = new Number(v.value);
if (isNaN(n)) {
	return false;
	}
if (maybenull==0 && v.value=='') {
	return false;
}
return true;
}

function isDate(f) {
	var t = Date.parse(f.value);
	if (isNaN(t)) {
		return false;
	}
}

function Check(f) {
	var ok=1;
	var _alertString="";
	var alertString2;
	if (f.itemtype.value.length==0) {
		_alertString += "\n- " + _("Itemtype missing");
	}
	if (!(isNotNull(window.document.Aform.description,1))) {
		_alertString += "\n- " + _("Description missing");
	}
	if ((!isNum(f.rentalcharge,0)) && f.rentalcharge.value.length > 0) {
		_alertString += "\n- " + _("Rental charge is not a number");
	}
	if (_alertString.length==0) {
		document.Aform.submit();
	} else {
		alertString2  = _("Form not submitted because of the following problem(s)");
		alertString2 += "\n------------------------------------------------------------------------------------\n";
		alertString2 += _alertString;
		alert(alertString2);
	}
}
</script>
<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
