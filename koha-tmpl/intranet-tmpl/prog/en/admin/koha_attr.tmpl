<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->Koha -- System Administration: 
<!-- TMPL_IF name="add_form" --><!-- TMPL_VAR name="action" --><!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirm" -->Confirm Deletion of attribute '<!-- TMPL_VAR name="searchfield" -->'<!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirmed" -->Data Deleted<!-- /TMPL_IF -->
<!-- TMPL_IF name="else" -->MARC tag Structure<!-- /TMPL_IF -->
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<!-- TMPL_INCLUDE NAME="menu.inc" -->
<!-- TMPL_INCLUDE NAME="menu-admin.inc" -->
<h1>KOHA attr matching for biblios,holdings and authorities XML & MARC records</h1>
<script language="javascript" type="text/javascript">
	function _(s) { return s } // dummy function for gettext
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isNotNull(f,noalert) {
		if (f.value.length ==0) {
   return false;
		}
		return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function toUC(f) {
		var x=f.value.toUpperCase();
		f.value=x;
		return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isNum(v,maybenull) {
	var n = new Number(v.value);
	if (isNaN(n)) {
		return false;
		}
	if (maybenull==0 && v.value=='') {
		return false;
	}
	return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isDate(f) {
		var t = Date.parse(f.value);
		if (isNaN(t)) {
			return false;
		}
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function Check(f) {
		var ok=1;
		var _alertString="";
		var alertString2;
		if (f.marctokoha.value.length==0) {
			_alertString += "\n- " + _("field name missing");
		}
		if (_alertString.length==0) {
			document.Aform.submit();
		} else {
			alertString2  = _("Form not submitted because of the following problem(s)");
			alertString2 += "\n------------------------------------------------------------------------------------\n";
			alertString2 += _alertString;
			alert(alertString2);
		}
	}
	</script>

<!-- TMPL_IF NAME="add_form" -->
<!-- ------------------------------------------------------------------------ -->
	<form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
		<input type="hidden" name="op" value="add_validate" />
		<input type="hidden" name="id" value='<!-- TMPL_VAR NAME="id" -->' />
	<div class="data"><table>
		<caption><!-- TMPL_IF NAME="use-heading-flags-p" --><!-- TMPL_IF NAME="heading-modify-tag-p" -->Modify tag<!-- /TMPL_IF --><!-- TMPL_IF NAME="heading-add-tag-p" -->Add tag<!-- /TMPL_IF --><!-- TMPL_ELSE --><!-- TMPL_VAR NAME="action" --><!-- /TMPL_IF --></caption>
	<tr><th><label>Kohafield<label></th><td><!-- TMPL_VAR NAME="searchfield" --></td></tr>
	<tr><th><label for="liblibrarian">Field description</label></th><td><input type="text" id="liblibrarian" name="liblibrarian" value="<!-- TMPL_VAR NAME="liblibrarian" escape="HTML" -->" size="80" maxlength="100" /></td></tr>
	<tr><th><label for="attr">Bib1 or other defined attribute</label></th><td><input type="text" id="attr" name="attr" value="<!-- TMPL_VAR NAME="attr" escape="HTML" -->" size="40" maxlength="80" />Add all common attributes to field</td></tr>
	<tr><th><label for="taglist">MARC tag for this field</label></th><td><!-- TMPL_VAR NAME="tagfield"  --></td></tr>
	<tr><th><label for="tagsublist">MARC subfieldcode for this field</label></th><td><!-- TMPL_VAR NAME="tagsubfield"  --></td></tr>
	<tr><th><label for="sorts">Sorts on this field</label></th><td><!-- TMPL_VAR NAME="sorts" --></td></tr>
	<tr><th><label for="opacshow">Shows in librarian searches</label></th><td><!-- TMPL_VAR NAME="intrashow" --><label for="opacshow">Shows in opac search</label><!-- TMPL_VAR NAME="opacshow" --></td></tr>
	<tr><th><label for="serverlist">Record type for this field</label></th><td><!-- TMPL_VAR NAME="recordtype"  --></td></tr>
	
	
	</table></div>
		<p><input type="submit" value="Save Changes" class="submit" onclick=Check(this.form) /></p>
	<p><input type="submit" value="Cancel and Return to Koha attr Structure" class="cancel" onclick="location.href='<!-- TMPL_VAR NAME="script_name" -->'; return false;" /></p>
	</form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirm" -->
<!-- ------------------------------------------------------------------------ -->
<div class="data"><table>
<caption>Confirm Deletion of Field <em><!-- TMPL_VAR NAME="searchfield" --></em>?</caption>
	<tr><th>Kohafield: </th><td><!-- TMPL_VAR NAME="searchfield" --></td></tr>
	<tr><th>Description: </th><td><!-- TMPL_VAR NAME="liblibrarian" --></td></tr>
	</table></div>
	<form class="inline" action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="hidden" name="op" value="delete_confirmed"/><input type="hidden" name="id" value='<!-- TMPL_VAR NAME="id" -->' />	<input type="submit" class="cancel" value="Yes, Delete this Tag" /></form> <form class="inline" action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" class="submit" value="No, Do Not Delete" /></form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirmed" -->
<!-- ------------------------------------------------------------------------ -->
	<div class="details"><h3>Field Deleted</h3>
	<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
	<input type="submit" class="submit" value="Return to Koha attributes Structure" />
	</form></div>
<!-- /TMPL_IF -->


<!-- ------------------------------------------------------------------------ -->
<!-- TMPL_IF NAME="else" -->
	<form name="f" action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
		
		<input type="text" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->" size="60" />
		<input type="submit" value="Kohafield Search" class="submit" />
		<p><!-- TMPL_IF Name="select_display"-->
				<label for="onlyused">Display only used Tags/Subfields</label><input type="checkbox" name="select_display" id="onlyused" value="True" checked="checked" onchange="document.f.submit()" />
			<!-- TMPL_ELSE -->
				<label for="onlyused">Display only used Tags/Subfields</label><input type="checkbox" name="select_display"  id="onlyused" value="True" onchange="document.f.submit()" />
			<!--/TMPL_IF --> 
		</p>
	</form>
	<div class="help">NOTE : if you change the link between a KOHA field and a Z39.50 attribute, ask your administrator to reindex ZEBRA with these attributes.</div>

	<div class="data">
	<table>
		<tr>
			<th scope="col">Koha field</th>
			<th scope="col">Attribute</th>
			<th scope="col">MARC tag/sub</th>
			<th scope="col">Label</th>
			<th scope="col">Sorts</th>
			<th scope="col">Intra Show</th>
			<th scope="col">Opac Show</th>
			<th scope="col">Related record</th>
			
			
			<th scope="col">&nbsp;</th>
		</tr>
	<!-- TMPL_IF NAME="select_display" -->
		<!-- TMPL_LOOP NAME="loop" -->
		<input type="hidden" value="<!-- TMPL_VAR NAME="attr" -->" />
		<input type="hidden" name="id" value="<!-- TMPL_VAR NAME="id" -->" />
		<tr class="highlight">
			<td><b><!-- TMPL_VAR NAME="marctokoha" --></b></td>
			<td><!-- TMPL_VAR NAME="attr" --></td>
			<td><!-- TMPL_VAR NAME="tagfield" --><!-- TMPL_VAR NAME="tagsubfield" --></td>
			<td><!-- TMPL_VAR NAME="liblibrarian" --></td>
			<td><!-- TMPL_IF NAME="sorts" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_IF NAME="intrashow" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_IF NAME="opacshow" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_VAR NAME="recordtype" --></td>
			<td><a class="edit" href="<!-- TMPL_VAR NAME="edit" -->">Edit Tag</a> <a class="delete" href="<!-- TMPL_VAR NAME="delete" -->">Delete Tag</a></td>
		</tr>
		<tr>
			<td>
				&nbsp;
			</td>
			
		</tr>
		<!-- /TMPL_LOOP -->
	<!-- TMPL_ELSE -->
		<!-- TMPL_LOOP NAME="loop" -->
	<input type="hidden" name="id" value="<!-- TMPL_VAR NAME="id" -->" />
		<!-- TMPL_IF NAME="toggle" --><tr class="highlight"><!-- TMPL_ELSE --><tr><!-- /TMPL_IF -->
			<td><b><!-- TMPL_VAR NAME="marctokoha" --></b></td>
			<td><!-- TMPL_VAR NAME="attr" --></td>
			<td><!-- TMPL_VAR NAME="tagfield" --><!-- TMPL_VAR NAME="tagsubfield" --></td>
			<td><!-- TMPL_VAR NAME="liblibrarian" --></td>
			<td><!-- TMPL_IF NAME="sorts" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_IF NAME="intrashow" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_IF NAME="opacshow" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
			<td><!-- TMPL_VAR NAME="recordtype" --></td>
			<td><a class="edit" href="<!-- TMPL_VAR NAME="edit" -->">Edit Tag</a> <a class="delete" href="<!-- TMPL_VAR NAME="delete" -->">Delete Tag</a></td>
		</tr>
		<!-- /TMPL_LOOP -->
	<!--/TMPL_IF -->
	</table>
	<div class="tabitem">
		<!-- TMPL_IF NAME="isprevpage" -->
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="get">
		<input type="hidden" value="<!-- TMPL_VAR NAME="prevpage" -->" name="offset" /><input type="hidden" value="<!-- TMPL_VAR NAME="searchfield" -->" name="searchfield" /><!--TMPL_IF Name="select_display"--><input type="hidden" value="select_display" name="True" /><!--/TMPL_IF --><input type="submit" value="&lt;&lt; Previous Page" class="submit" /></form>
		<!-- /TMPL_IF -->	
		
	<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
		<input type="hidden" name="op" value="add_form" />
	
	
		<input type="submit" value="Add Koha atrribute" class="submit" /></form>
		
		<!-- TMPL_IF NAME="nextpage" -->
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="get"><input type="hidden" name="offset" value="<!-- TMPL_VAR NAME="nextpage" -->" /><input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->" />
		<!--TMPL_IF Name="select_display"--><input type="hidden" name="select_display" value="True" /><!--/TMPL_IF --><input type="submit" class="submit" value="Next Page &gt;&gt;" /></form>
		<!-- /TMPL_IF -->
</div>
</div>
<!-- /TMPL_IF -->


<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
