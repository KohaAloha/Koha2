<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; Tools &rsaquo; Logs</title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->

<!-- Additions to enable Calendar system -->
<link rel="stylesheet" type="text/css" href="<!-- TMPL_VAR name="themelang" -->/includes/calendar/calendar-system.css">
<!-- End of additions --><!-- Additions to enable Calendar system -->
<script type="text/javascript" src="<!-- TMPL_VAR name="themelang" -->/includes/calendar/calendar.js"></script>
<script type="text/javascript" src="<!-- TMPL_VAR name="themelang" -->/includes/calendar/calendar-en.js"></script>
<script type="text/javascript" src="<!-- TMPL_VAR name="themelang" -->/includes/calendar/calendar-setup.js"></script>
<!-- End of additions -->

<!-- TMPL_INCLUDE NAME="menus.inc" -->
<!-- TMPL_INCLUDE NAME="menu-tools.inc" -->

<h1>Browse system logs</h1>

<form method="post" action="/cgi-bin/koha/tools/viewlog.pl">

<fieldset>
    <legend>Additional infos</legend>
        <p>
         Display from <input type="text" size="10" id="from" name="from" value="<!-- TMPL_VAR NAME="datefrom"-->"/>
							<img src="<!-- TMPL_VAR Name="themelang" -->/includes/calendar/cal.gif" border="0" hspace="0" vspace="0" id="openCalendarFrom" style="cursor: pointer;" valign="top">
								<script language="JavaScript" type="text/javascript">
									function validate1(date) {
										var day = date.getDate();
										var month = date.getMonth() + 1;
										var year = date.getFullYear();
										var weekDay = date.getDay();
										var dayMonth = month + '-' + day;
										var dateString = year + '-' + month + '-' + day;
										var dateTo = document.getElementById('to').value.split("-");
										var limitDate = new Date(dateTo[0], (dateTo[1] - 1), dateTo[2]);
										if (date > limitDate) {
											return true;
										} else {
											return false;
										}
									}
					
									Calendar.setup(
										{
											inputField : "from",
											ifFormat : "%Y-%m-%d",
											button : "openCalendarFrom",
											disableFunc : validate1,
											dateStatusFunc : validate1
										}
									);
								</script>
					to <input size="10" id="to" name="to" type="text" value="<!-- TMPL_VAR NAME="dateto"-->"/>
						<img src="<!-- TMPL_VAR Name="themelang" -->/includes/calendar/cal.gif" id="openCalendarTo" style="cursor: pointer;" valign="top" border="0" hspace="0" vspace="0">
					<script type="text/javascript">
						function validate2(date) {
							var day = date.getDate();
							var month = date.getMonth() + 1;
							var year = date.getFullYear();
							var weekDay = date.getDay();
							var dayMonth = month + '-' + day;
							var dateString = year + '-' + month + '-' + day;
							var dateFrom = document.getElementById('from').value.split("-");
							var limitDate = new Date(dateFrom[0], (dateFrom[1] - 1), dateFrom[2]);
							if (limitDate > date) {
								return true;
							} else {
								return false;
							}
						}
						Calendar.setup(
		    			{
							inputField : "to",
							ifFormat : "%Y-%m-%d",
							button : "openCalendarTo",
							disableFunc : validate2,
							dateStatusFunc : validate2
						}
					);
		    </script>
		</p>
		<p>
		<p><b>Export into</b></p>
        <input id="screen" type="radio" checked name="output" value="screen" />
        <label for="screen" >To screen into the browser</label>
		<br>
		<input id="file" type="radio" name="output" value="file" />
		 <label for="file">To file</label>
		<input type="text" name="basename" value="Export"> into an application  
		<!-- TMPL_VAR NAME="CGIextChoice" -->
		<!-- TMPL_VAR NAME="CGIsepChoice" -->
	    <input type="hidden" name="report_name" value="<!--TMPL_VAR NAME="report_name" -->">
	    <input type="submit" value=" GO " />
	    </p>
</fieldset>
    
    <!-- TMPL_IF NAME="do_it" -->
        <p>
        <!-- TMPL_IF NAME="total" -->
            <b><!-- TMPL_VAR NAME="total" --> lines found.</b>
        <!-- TMPL_ELSE -->
            <b><span class="problem">No log found.</span></b>
        <!-- /TMPL_IF -->
        </p>
    <!-- /TMPL_IF -->
    <div class="searchresults">
	<table>
    <tr>
        <th>Date</th>
        <th>Librarian</th>
    	<th>Module</th>
    	<th>Action</th>
		<th>Object</th>
		<th>Info</th>
	</tr>
	<tr>
	    <td>
            <input type="submit" value="filter" />
            <input type="hidden" name="do_it" value="1">
	    </td>
	    <td>
	        <input type="text" name="user" value="<!-- TMPL_VAR NAME="user"-->" />
	    </td>
	    <td>
	        <select name="module">
			    <option value="" checked>All</option>
			    <option value ="CATALOGUING">Catalogue</option>
				<option value ="MEMBERS">Members</option>
				<option value ="ACQUISITION">Acquisitions</option>
				<option value ="SERIAL">Serial</option>
				<option value="CIRCULATION">Circulation</option>
				<option value="LETTER">Letter</option>
				<option value="FINES">Fines</option>
			</select>
	    </td>
	    <td>
	        <select name="action">
    			<option value ="">All</option>
				<option value ="add">Add</option>
				<option value ="del">Delete</option>
				<option value ="mod">Modify</option>
				<option value="issue">Issue</option>
				<option value="return">Return</option>
			</select>
	    </td>
	    <td>
	        <input type="text" name="object" value="<!-- TMPL_VAR NAME="object"-->" />
	    </td>
	    <td>
	        <input type="text" name="info" value="<!-- TMPL_VAR NAME="info"-->" />
	    </td>
	</tr>
	    <!-- TMPL_LOOP NAME="looprow" -->
					<tr>
						<td><!-- TMPL_VAR NAME="timestamp" --></td>
						<td>
						    <a href="/cgi-bin/koha/members/moremember.pl?borrowernumber=<!-- TMPL_VAR NAME="user" -->" title="display detail for this librarian.">
						        <!-- TMPL_VAR NAME="user" -->
						    </a>
						</td>
						<td><!-- TMPL_VAR NAME="module" --></td>
						<td><!-- TMPL_VAR NAME="action" --></td>
						<td>
						    <!-- TMPL_IF NAME="MEMBERS"-->
						        <a href="/cgi-bin/koha/members/moremember.pl?borrowernumber=<!-- TMPL_VAR NAME="object" -->" title="display detail for this member." title="Display member details.">
						            member <!-- TMPL_VAR NAME="object" -->
						        </a>
						    <!-- TMPL_ELSE -->
						    <!-- TMPL_IF NAME="CIRCULATION" -->
						        <a href="/cgi-bin/koha/members/moremember.pl?borrowernumber=<!-- TMPL_VAR NAME="object" -->" title="display detail for this member." title="Display member details.">
						            <!-- TMPL_IF NAME="object"-->member <!-- TMPL_VAR NAME="object" --><!-- /TMPL_IF -->
						        </a>
						    <!-- TMPL_ELSE -->
						    <!-- TMPL_IF NAME="CATALOGUING" -->
						        <a href="/cgi-bin/koha/catalogue/detail.pl?biblionumber=<!-- TMPL_VAR NAME="object" -->" title="Display detail for this biblio">biblio <!-- TMPL_VAR NAME="object" --></a>
						    <!-- TMPL_ELSE-->
						    <!-- TMPL_IF NAME="SERIAL"-->
						        <a href="/cgi-bin/koha/serials/subscription-detail.pl?subscriptionid=<!-- TMPL_VAR NAME="object" -->">
						            <!-- TMPL_VAR NAME="object" -->
						        </a>
						    <!-- TMPL_ELSE -->
    						    <!-- TMPL_VAR NAME="object" -->
    						<!-- /TMPL_IF -->
    						<!-- /TMPL_IF -->
    						<!-- /TMPL_IF -->
    						<!-- /TMPL_IF -->
						</td>
						<td>
						    <!-- TMPL_IF NAME="CIRCULATION" -->
						         <a href="/cgi-bin/koha/catalogue/detail.pl?biblionumber=<!-- TMPL_VAR NAME="info" -->" title="Display detail for this biblio">biblio <!-- TMPL_VAR NAME="info" --></a>
    						<!-- TMPL_ELSE -->
    						    <!-- TMPL_VAR NAME="info" -->
    						<!-- /TMPL_IF -->
						</td>
					</tr>
		<!-- /TMPL_LOOP -->
    </table>
    </div>

<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
