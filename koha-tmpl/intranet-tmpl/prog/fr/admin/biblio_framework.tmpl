<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; Administration système :  <!-- TMPL_IF NAME="add_form" --><!-- TMPL_IF NAME="frameworkcode" -->Modifier le texte de la grille<!-- TMPL_ELSE -->Ajouter une grille<!-- /TMPL_IF --><!-- /TMPL_IF --><!-- TMPL_IF NAME="delete_confirm" -->Supprimer la grille pour <!-- TMPL_VAR NAME="frameworktext" --> (<!-- TMPL_VAR NAME="frameworkcode" -->)?<!-- /TMPL_IF --><!-- TMPL_IF NAME="else" -->Grille de catalogage<!-- /TMPL_IF --></title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->

<!-- TMPL_INCLUDE NAME="menus.inc" -->
<!-- TMPL_INCLUDE NAME="menu-admin.inc" -->

<script language="javascript" type="text/javascript">
function _(s) { return s } // dummy function for gettext
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isNotNull(f,noalert) {
    if (f.value.length ==0) {
        return false;
    }
    return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function toUC(f) {
    var x=f.value.toUpperCase();
    f.value=x;
    return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isNum(v,maybenull) {
var n = new Number(v.value);
if (isNaN(n)) {
    return false;
    }
if (maybenull==0 && v.value=='') {
    return false;
}
return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isDate(f) {
    var t = Date.parse(f.value);
    if (isNaN(t)) {
        return false;
    }
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function Check(f) {
    var ok=1;
    var _alertString="";
    var alertString2;
    if (f.frameworkcode.value.length==0) {
        _alertString += "\n- " + _("Code-grille manquant");
    }
    if (!(isNotNull(window.document.Aform.frameworktext,1))) {
        _alertString += "\n- " + _("Description manquante");
    }
    if (_alertString.length==0) {
        document.Aform.submit();
    } else {
        alertString2  = _("Formulaire non soumis à cause du (des) problème(s) suivant(s)");
        alertString2 += "\n------------------------------------------------------------------------------------\n";
        alertString2 += _alertString;
        alert(alertString2);
    }
}
</script>

<!-- TMPL_IF NAME="add_form" -->
    <h1><!-- TMPL_IF NAME="frameworkcode" -->Modifier le texte de la grille<!-- TMPL_ELSE -->Ajouter une grille<!-- /TMPL_IF --></h1>
    <form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
        <input type="hidden" name="op" value="add_validate" />
        <input type="hidden" name="checked" value="0" />
        <!-- TMPL_IF NAME="frameworkcode" -->
            <p><label for="frameworkcode">Code de grille de catalogage</label><input type="hidden" id="frameworkcode" name="frameworkcode" value="<!-- TMPL_VAR NAME="frameworkcode" -->" /><!-- TMPL_VAR NAME="frameworkcode" --></p>
        <!-- TMPL_ELSE -->
            <p><label for="frameworkcode">Code de grille de catalogage</label><input type="text" id="frameworkcode" name="frameworkcode" size="4" maxlength="4" onblur="toUC(this)" /></p>
        <!-- /TMPL_IF -->
        <p><label for="description">Description</label>
        <input type="text" name="frameworktext" size="40" maxlength="80" value="<!-- TMPL_VAR NAME="frameworktext" escape=HTML -->" /></p>
        <p>	<input type="button" value="Valider" class="submit" onclick="Check(this.form)"></p>
    </form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirm" -->
<h3>Supprimer la grille pour <!-- TMPL_VAR NAME="frameworktext" --> (<!-- TMPL_VAR NAME="frameworkcode" -->)?</h3>
    <!-- TMPL_IF NAME="total" -->
        <div class="error">Cette grille est utilisée <!-- TMPL_VAR NAME="total" --> fois
    <!-- /TMPL_IF -->
    <p>
        <form class="inline" action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="hidden" name="op" value="delete_confirmed" /><input type="hidden" name="frameworkcode" value="<!-- TMPL_VAR NAME="frameworkcode" -->" /><input type="submit" value="Oui, supprimer cette grille!">
        </form>
        <form class="inline" action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" value="Non, ne pas supprimer !"></form>
    </p>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="else" -->
<h1>Grille de catalogage</h1>
<p>Nom de grille, puis aller à la structure MARC  pour déterminer les paramètres de l'éditeur MARC</p>
<table>
    <tr>
        <th>Code</th>
        <th>Description</th>
        <th>&nbsp;</th>
        <th>Modifier</th>
        <th>Supprimer</th>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>Grille par défaut</td>
        <td><a href="marctagstructure.pl?frameworkcode=<!-- TMPL_VAR NAME="frameworkcode" -->">Structure MARC</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    
    <!-- TMPL_LOOP NAME="loop" -->
        <tr>
            <td><!-- TMPL_VAR name="frameworkcode" --></td>
            <td><!-- TMPL_VAR name="frameworktext" --></td>
            <td><a href="marctagstructure.pl?frameworkcode=<!-- TMPL_VAR name="frameworkcode" -->" >Structure MARC</a></td>
            <td><a href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;frameworkcode=<!-- TMPL_VAR name="frameworkcode" escape="HTML" -->">Modifier</a></td>
            <td><a href="<!-- TMPL_VAR name="script_name" -->?op=delete_confirm&amp;frameworkcode=<!-- TMPL_VAR name="frameworkcode" escape="HTML" -->">Supprimer</a></td>
        </tr>
    <!-- /TMPL_LOOP -->
</table>
<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
    <input type="hidden" name="op" value="add_form" />
    <input type="submit" value="Ajouter une grille">
    <td><!-- TMPL_IF NAME="previous" --><a href="<!-- TMPL_VAR NAME="previous" -->">&lt;&lt; Précédent</a><!-- /TMPL_IF --></td>
    <td><!-- TMPL_IF NAME="next" --><a href="<!-- TMPL_VAR NAME="next" -->">Suivant >></a><!-- /TMPL_IF --></td>
</form>

<!-- /TMPL_IF -->
<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
