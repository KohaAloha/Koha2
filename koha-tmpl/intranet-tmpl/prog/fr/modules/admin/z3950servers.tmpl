<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; Administration &rsaquo;système <!-- TMPL_IF NAME="else" -->Serveurs Z39.50<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="add_form" --> Serveurs Z39.50 &rsaquo; <!-- TMPL_IF NAME="searchfield" -->Modifier le serveur Z39.50 <!-- TMPL_VAR NAME="searchfield" --><!-- TMPL_ELSE -->Ajouter un serveur Z39.50<!-- /TMPL_IF --><!-- /TMPL_IF -->
<!-- TMPL_IF NAME="delete_confirm" -->Serveurs z3950 &rsaquo; Confirmer la suppression<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="add_validate" -->Serveurs z3950 &rsaquo; serveur ajouté<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="delete_confirmed" -->Serveurs z3950 &rsaquo; Serveur supprimé<!-- /TMPL_IF --></title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->

<!-- TMPL_IF NAME="add_form" -->
<script type="text/javascript">
//<![CDATA[
        //
        function isNotNull(f,noalert) {
                if (f.value.length ==0) {
                    return false;
                }
                return true;
        }
        //
        function toUC(f) {
                var x=f.value.toUpperCase();
                f.value=x;
                return true;
        }
        //
        function isNum(v,maybenull) {
        var n = new Number(v.value);
        if (isNaN(n)) {
                return false;
                }
        if (maybenull==0 && v.value=='') {
                return false;
        }
        return true;
        }
        //
        function isDate(f) {
                var t = Date.parse(f.value);
                if (isNaN(t)) {
                       return false;                       
                }
        }
        //
        function Check(f) {
                var ok=1;
                var _alertString="";
                var alertString2;
                if (f.searchfield.value.length==0) {
                        _alertString += "- site name missing\n";
                }
                if (f.host.value.length==0) {
                        _alertString += "- host missing\n";
                }
                if (f.port.value.length==0) {
                        _alertString += "- port missing\n";
                }
                if (f.db.value.length==0) {
                        _alertString += "- database missing\n";
                }
                if (isNaN(f.port.value)) {
                        _alertString += "- port must be a number\n";
                }
                if (isNaN(f.rank.value)) {
                        _alertString += "- rank must be a number\n";
                }
                if (isNaN(f.checked.value) || f.checked.value<0 || f.checked.value>1) {
                        _alertString += "- checked must be 0 or 1\n";
                }
                if (_alertString.length==0) {
                        document.Aform.submit();
                } else {
                        alertString2 = "Form not submitted because of the following problem(s)\n";
                        alertString2 += "------------------------------------------------------------------------------------\n\n";
                        alertString2 += _alertString;
                        alert(alertString2);
                }
        }
        //]]>
</script>
        <!-- /TMPL_IF -->
</head>
<body>
<!-- TMPL_INCLUDE NAME="header.inc" -->
<!-- TMPL_INCLUDE NAME="z3950-admin-search.inc" -->

<div id="breadcrumbs"><a href="/cgi-bin/koha/mainpage.pl"> Accueil </a> &rsaquo;<a href="/cgi-bin/koha/admin/admin-home.pl">Administration</a> &rsaquo; <!-- TMPL_IF NAME="else" -->Serveurs Z39.50<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="add_form" --> <a href="/cgi-bin/koha/admin/z3950servers.pl">Serveurs z3950</a> &rsaquo; <!-- TMPL_IF NAME="searchfield" -->Modifier le serveur Z39.50 <!-- TMPL_VAR NAME="searchfield" --><!-- TMPL_ELSE -->Ajouter un serveur Z39.50<!-- /TMPL_IF --><!-- /TMPL_IF -->
<!-- TMPL_IF NAME="delete_confirm" --> <a href="/cgi-bin/koha/admin/z3950servers.pl">Serveurs z3950</a> &rsaquo; Confirmer la suppression<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="add_validate" --> <a href="/cgi-bin/koha/admin/z3950servers.pl">Serveurs z3950</a> &rsaquo; Serveur ajouté<!-- /TMPL_IF -->
<!-- TMPL_IF NAME="delete_confirmed" --> <a href="/cgi-bin/koha/admin/z3950servers.pl">Serveurs z3950</a> &rsaquo; Serveur supprimé<!-- /TMPL_IF --></div>

<div id="doc3" class="yui-t2">
   
   <div id="bd">
	<div id="yui-main">
	<div class="yui-b">

<!-- TMPL_IF NAME="add_form" -->
        

       
        <form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
        <input type="hidden" name="op" value="add_validate" />
<!-- TMPL_IF NAME="searchfield" -->
                <h1>Modification d'un serveur Z39.50</h1>
        <!-- TMPL_ELSE -->
                <h1>Ajouter un serveur Z39.50</h1>
        <!-- /TMPL_IF -->                
        <fieldset class="rows">
        <ol><!-- TMPL_IF NAME="searchfield" -->
                <li>
                        <span class="label">Serveur Z39.50 : </span>
                        
                                <input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->" /><!-- TMPL_VAR NAME="searchfield" -->
                        
                </li>
        <!-- TMPL_ELSE -->
                <li>
                        <label for="searchfield">Serveur Z39.50 : </label>
                        
                                <input type="text" name="searchfield" id="searchfield" size="65" maxlength="100" onblur="toUC(this)" />
                        
                </li>
        <!-- /TMPL_IF -->

		<li>
			<label for="host">Nom du serveur hôte : </label>
			
				<input type="text" name="host" id="host" size="30" value="<!-- TMPL_VAR NAME="host" -->" />
			
		</li>
		<li>
			<label for="port">Port : </label>
			
				<input type="text" name="port" id="port" size="5" value="<!-- TMPL_VAR NAME="port" -->" onblur="isNum(this)" />
			
		</li>
		<li>
			<label for="db">Base de données : </label>
			
				<input type="text" name="db" id="db" value="<!-- TMPL_VAR NAME="db" -->" />
			
		</li>
		<li>
			<label for="userid">Identifiant : </label>
			
				<input type="text" name="userid" id="userid" value="<!-- TMPL_VAR NAME="userid" -->" />
			
		</li>
		<li>
			<label for="password">Mot de passe :  </label>
			
				<input type="text" name="password" id="password" value="<!-- TMPL_VAR NAME="password" -->" />
			
		</li>
		<li>
			<label for="checked">Actif (recherché par défaut) </label>
			
				<input type="text" size="1" name="checked" id="checked" value="<!-- TMPL_VAR NAME="checked" -->" onblur="isNum(this)" />  </li>
		<li>
			<label for="rank">Rang (ordre d'affichage) : </label>
			
				<input type="text" name="rank" id="rank" size="4" value="<!-- TMPL_VAR NAME="rank" -->" onblur="isNum(this)" />
			
		</li>
				<li>
			<label for="syntax">Syntaxe (Z39-50 peut envoyer<br />
			 notices dans divers formats. En choisir un) </label>
			
				<select name="syntax" id="syntax">
					<option value="USMARC">USMARC</option>
					<option value="UNIMARC">UNIMARC</option>
				</select>
			
		</li></ol>
        </fieldset><input type="button" value="<!-- TMPL_IF NAME=searchfield -->Valider modifications<!-- TMPL_ELSE -->Ajout serveur Z3950<!-- /TMPL_IF -->" onclick="Check(this.form)"> 
        </form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="add_validate" -->
<h3>Serveur Z39.50 ajouté</h3>
<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
        <input type="submit" value="OK" />
        </form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirm" -->
	<!-- TMPL_VAR NAME="reqsel" --> <h3>Confirmer la suppression du serveur  <!-- TMPL_VAR NAME="searchfield" --></h3>	
        <ul>
                <li>
                        <strong>Site : </strong>
                        
                                <!-- TMPL_VAR NAME="searchfield" -->
                        
                </li>
                <li>
                        <strong>Nom du serveur hôte : </strong>
                        <!-- TMPL_VAR NAME="host" -->
                </li>
                <li>
                        <strong>Port : </strong>
                        <!-- TMPL_VAR NAME="port" -->
                </li>
                <li>
                        <strong>Base de données : </strong>
                        <!-- TMPL_VAR NAME="db" -->
                </li>
                <li>
                        <strong>Identifiant : </strong>
                        <!-- TMPL_VAR NAME="userid" -->
                </li>
                <li>
                        <strong>Mot de passe :  </strong>
                        <!-- TMPL_VAR NAME="password" -->
                </li>
                <li>
                        <strong>Actif : </strong>
                        <!-- TMPL_VAR NAME="checked" -->
                </li>
                <li>
                        <strong>Rang : </strong>
                        <!-- TMPL_VAR NAME="rank" -->
                </li>
 	</ul>
                                        <form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
                        <input type="hidden" name="op" value="delete_confirmed" />
                        <input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->" /><input type="submit" value="Supprimer ce serveur"></form>  <form action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" value="Ne pas supprimer"></form>



<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirmed" -->
<h3>Serveur Z39.50 supprimé</h3>
<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
                <input type="submit" value="OK" />
</form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="else" -->
<h3>Gestion des serveurs Z39.50</h3>

        <!-- TMPL_IF NAME="searchfield" -->
                Vous recherchiez <!-- TMPL_VAR NAME="searchfield" -->
        <!-- /TMPL_IF -->		
<table>
                <tr>
                        <th>Site</th>
                        <th>Nom du serveur hôte/port</th>
                        <th>Base de données</th>
                        <th>Identifiant utilisateur</th>
                        <th>Mot de passe</th>
                        <th>Contrôlé</th>
                        <th>Rang</th>       
						<th>Syntaxe</th>
                        <th colspan="2">&nbsp;</th>
                </tr>
                <!-- TMPL_LOOP NAME="loop" -->
               <!-- TMPL_IF NAME="toggle" --><tr class="highlight"><!-- TMPL_ELSE --><tr><!-- /TMPL_IF -->
                        <td><!-- TMPL_VAR NAME="name" --></td>
                        <td><!-- TMPL_VAR NAME="host" --> : <!-- TMPL_VAR NAME="port" --></td>
                        <td><!-- TMPL_VAR NAME="db" --></td>
                        <td><!-- TMPL_VAR NAME="userid" --></td>
                        <td><!-- TMPL_VAR NAME="password" --></td>
                        <td><!-- TMPL_VAR NAME="checked" --></td>
                        <td><!-- TMPL_VAR NAME="rank" --></td>
						<td><!-- TMPL_VAR NAME="syntax" --></td>
                        <td><a href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;searchfield=<!-- TMPL_VAR NAME="name" -->">Modifier</a></td>
                        <td><a href="<!-- TMPL_VAR name="script_name" -->?op=delete_confirm&amp;searchfield=<!-- TMPL_VAR NAME="name" -->">Supprimer</a></td>                
			</tr>
                <!-- /TMPL_LOOP -->
	</table>

<!-- TMPL_IF NAME="offsetgtzero" --><form action="<!-- TMPL_VAR NAME="script_name" -->" method="get">
	<input type="hidden" name="offset" value="<!-- TMPL_VAR NAME="prevpage" -->" />
	<input type="submit" value="<< Prdt.">
</form><!-- /TMPL_IF -->
<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
        <input type="hidden" name="op" value="add_form" />
		<input type="submit" value="Ajouter un serveur Z39.50">
</form>
<!-- TMPL_IF NAME="ltcount" --><form action="<!-- TMPL_VAR NAME="script_name" -->" method="get">
	<input type="hidden" name="offset" value="<!-- TMPL_VAR NAME="nextpage" -->" />
	<input type="submit" value="Suivant >>">
</form> <!-- /TMPL_iF -->
 

<!-- /TMPL_IF -->

</div>
</div>
<div class="yui-b">
<!-- TMPL_INCLUDE NAME="admin-menu.inc" -->
</div>
</div>
<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
