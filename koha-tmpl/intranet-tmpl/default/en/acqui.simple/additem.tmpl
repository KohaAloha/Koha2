<TMPL_INCLUDE NAME="cat-top.inc">
<STYLE TYPE="text/css" MEDIA=screen>
	table {	font-family:Arial;
	font-weight:normal;
	text-decoration:none;
	font-size:10pt;}
</STYLE>
<br /><br />
<form method="post" action="additem.pl" name="f">
<input type="hidden" name="op" value="<TMPL_VAR name="op">">
<input type="hidden" name="bibid" value="<TMPL_VAR name="bibid">">
<table width="80%" align="center" cellspacing=0 cellpadding=5 border=1>
<tr background="/images/background-mem.gif">
	<td>
	<table width="100%" border=0 cellpadding=0 cellspacing=0>
		<tr>
			<td width=8%><a href="addbiblio.pl?oldbiblionumber=<TMPL_VAR name="biblionumber">"><img border="0" src="<TMPL_VAR name="interface">/<TMPL_VAR name="theme">/images/fileopen.png"></td>
			<td width=8%><a href="../detail.pl?bib=<TMPL_VAR name="biblionumber">">Normal</a></td>
			<td align="center"><b>MARC biblio : <TMPL_VAR name="bibid"></b></td>
		</tr>
	</table>
	</td>
</tr>
</table>
<br />
<center>
<DIV name="10XX" id="10XX">
<table border=1 cellspacing=0 cellpadding=5 width=80%>
	<tr  background="/images/background-mem.gif">
		<th>Existing items</th>
	</tr>
</table>
<table border=1 cellspacing=0 cellpadding=0 width=80%>
	<tr  background="/images/background-mem.gif">
		<TMPL_LOOP name="item_header_loop"><th><tmpl_var name="header_value"></th></TMPL_LOOP><th colspan=2>&nbsp;</th>
	</tr>
		<TMPL_LOOP name="item_loop">
		<tr>
			<TMPL_VAR name="item_value">
			<td><a href="additem.pl?op=edititem&bibid=<TMPL_VAR name="bibid">&itemnum=<TMPL_VAR name="itemnum">">Edit</a></td>
		</tr>
		</TMPL_LOOP>
</table>
</DIV>
<br /><br />
<table border=1 cellspacing=0 cellpadding=5 width=80%>
	<tr  background="/images/background-mem.gif">
		<th>New Item</th>
	</tr>
</table><table width=80%  cellspacing=0 cellpadding=1 border=0>
	<TMPL_LOOP name="item">
	<tr>
		<td width="3%">&nbsp;</td>
		<td width="2%"><TMPL_VAR name="subfield"></td>
		<td width="55%"><TMPL_IF name="mandatory"><b></TMPL_IF><TMPL_VAR name="marc_lib"><TMPL_IF name="mandatory"></b></TMPL_IF></td>
		<td width="40%">
			<TMPL_VAR name="marc_value">
			<input type="hidden" name="tag" value="<TMPL_VAR name="tag">">
			<input type="hidden" name="subfield" value="<TMPL_VAR name="subfield">">
			<input type="hidden" name="mandatory" value="<TMPL_VAR name="mandatory">">
		</td>
	</tr>
	</tmpl_loop>
</table>
<input type="hidden" name="itemnum" value="<TMPL_VAR name="itemnum">">
<TMPL_IF name="opisadd">
<input type="button" value="Add item" onClick='Check(this.form)' accesskey="w">
<TMPL_ELSE>
<input type="hidden" name="tag" value="<TMPL_VAR name="itemtagfield">">
<input type="hidden" name="subfield" value="<TMPL_VAR name="itemtagsubfield">">
<input type="hidden" name="field_value" value="<TMPL_VAR name="itemnum">">
<input type="button" value="Modify item" onClick='Check(this.form)' accesskey="w">
</TMPL_IF>
</center>
</form>
<script LANGUAGE="JavaScript">
function active(numlayer)
{
	for (i=10; i < 11 ; i++ ) {
		ong = i+"XX";
			link = "link"+i;
		if (numlayer==i) {
			document.getElementById(ong).style.visibility="visible";
			document.getElementById(link).style.backgroundColor="#11AA11";
			document.getElementById(link).style.backgroundImage="url(/images/background-mem.gif)";
		} else {
			document.getElementById(ong).style.visibility="hidden";
			document.getElementById(link).style.backgroundColor="#FFFFFF";
			document.getElementById(link).style.backgroundImage="";
		}
	}
}
function Check(f) {
	var total_errors=0;
//	alert(f.field_value.length);
	for (i=0 ; i<f.field_value.length ; i++) {
//	alert (f.field_value[i].value);
		if (f.field_value[i].value.length==0 && f.mandatory[i].value==1) {
			document.getElementById("error"+i).style.backgroundColor="#FF0000";
			total_errors++;
		} else {
//			document.getElementById("error"+i).style.backgroundColor="#FFFFFF";
		}
	}
	var alertString2;
	if (total_errors==0) {
		document.f.submit();
	} else {
		alertString2 = "Form not submitted because of the following problem(s)\n";
		alertString2 += "------------------------------------------------------------------------------------\n\n";
		alertString2 += "- "+ total_errors+" mandatory fields empty (see bold subfields)";
		alert(alertString2);
	}
}
function Dopop(link,i) {
	defaultvalue=document.forms[0].field_value[i].value;
	newin=window.open(link+"&result="+defaultvalue,"value builder",'width=500,height=400,toolbar=false,scrollbars=yes');
}
</script>
</body>
</html>
