<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->

<script language="javascript" type="text/javascript">
function _(s) { return s } // dummy function for gettext
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isNotNull(f,noalert) {
	if (f.value.length ==0) {
		return false;
	}
	return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function toUC(f) {
	var x=f.value.toUpperCase();
	f.value=x;
	return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isNum(v,maybenull) {
var n = new Number(v.value);
if (isNaN(n)) {
	return false;
	}
if (maybenull==0 && v.value=='') {
	return false;
}
return true;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function isDate(f) {
	var t = Date.parse(f.value);
	if (isNaN(t)) {
		return false;
	}
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function Check(f) {
	var ok=1;
	var _alertString="";
	var alertString2;
	if (f.authtypecode.value.length==0) {
		_alertString += "\n- " + _("Authority type : code missing");
	}
	if (!(isNotNull(window.document.Aform.authtypetext,1))) {
		_alertString += "\n- " + _("Description missing");
	}
	if (_alertString.length==0) {
		document.Aform.submit();
	} else {
		alertString2  = _("Form not submitted because of the following problem(s)");
		alertString2 += "\n------------------------------------------------------------------------------------\n";
		alertString2 += _alertString;
		alert(alertString2);
	}
}
</script>
<div id="mainbloc">
<!-- TMPL_IF NAME="add_form" -->
	<!-- TMPL_IF NAME="authtypecode" -->
		<h1>Modify authority type</h1>
	<!-- TMPL_ELSE -->
		<h1>Add authority type</h1>
	<!-- /TMPL_IF -->
	<form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
		<input type="hidden" name="op" value="add_validate">
		<input type="hidden" name="checked" value="0">
			<!-- TMPL_IF NAME="authtypecode" -->
				<p><label class="label100">Authority type<label><input type="hidden" name="authtypecode" value="<!-- TMPL_VAR NAME="authtypecode" -->"><!-- TMPL_VAR NAME="authtypecode" --></p>
			<!-- TMPL_ELSE -->
				<p><label class="label100">Authority type<label><input type="text" name="authtypecode" size="10" maxlength="10" onblur="toUC(this)"></p>
			<!-- /TMPL_IF -->
			<p>
				<label class="label100">Description</label>
				<input type="text" name="authtypetext" size="40" maxlength="80" value="<!-- TMPL_VAR NAME="authtypetext" escape=HTML -->">
			</p>
			<p>
				<label class="label100">Summary</label>
				<textarea name="summary" cols="40" rows="10"><!-- TMPL_VAR NAME="summary" --></textarea>
			</p>
			<p><label class="label100">Report tag</label>
				<input type="text" name="auth_tag_to_report" size="5" maxlength="3" value="<!-- TMPL_VAR NAME="auth_tag_to_report">">
				Enter here the number of the tag that will be reported in the biblio (subfield by subfield). For example, in UNIMARC, enter 200 to report every 200 subfield in the 70x biblio</p>
			</p>
			<p>
				<input type="button" value="OK"class="button parameters" onclick="Check(this.form)">
			</p>
	</form>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="delete_confirm" -->
<div id="bloc25">
	<h2 class="parameters">Authority structure definition for <!-- TMPL_VAR NAME="authtypetext" --> (<!-- TMPL_VAR NAME="authtypecode" -->)</h2>
	<!-- TMPL_IF NAME="total" -->
		<p>
			<b>This record is used <!-- TMPL_VAR NAME="total" --> times</b>
		</p>
	<!-- /TMPL_IF -->
	<p>CONFIRM DELETION</p>
	<p>
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="hidden" name="op" value="delete_confirmed">
			<input type="hidden" name="authtypecode" value="<!-- TMPL_VAR NAME="authtypecode" -->">
			<input type="submit" value="YES" class="button parameters">
		</form>
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="submit" value="NO" class="button parameters">
		</form>
	</p>
</div>
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="else" -->
<h1>Auth type Admin</h1>
<p>Define authority types, then authority MARC structure in the same way you define itemtypes &amp; biblio MARC tag structure. Authority values are managed through plugins</p>
<table>
	<tr>
		<th class="parameters">Code</th>
		<th class="parameters">Description</th>
		<th class="parameters">summary</th>
		<th class="parameters">Tag reported</th>
		<th class="parameters">&nbsp;</th>
		<th class="parameters">Edit</th>
		<th class="parameters">Delete</th>
	</tr>
	<tr>
		<td>&nbsp;</td>
		<td>Default framework</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td><a href="auth_tag_structure.pl" class="button parameters">MARC structure</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
	</tr>
	
	<!-- TMPL_LOOP NAME="loop" -->
		<tr>
			<td><!-- TMPL_VAR NAME="authtypecode" --></td>
			<td><!-- TMPL_VAR NAME="authtypetext" --></td>
			<td><!-- TMPL_VAR NAME="summary" --></td>
			<td><!-- TMPL_VAR NAME="auth_tag_to_report" --></td>
			<td><a href="auth_tag_structure.pl?authtypecode=<!-- TMPL_VAR NAME="authtypecode" -->" class="button parameters" >MARC structure</a></td>
			<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=add_form&amp;authtypecode=<!-- TMPL_VAR NAME="authtypecode" escape="HTML" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/fileopen.png"  width="32" hspace="0" vspace="0" border="0"></a></td>
			<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=delete_confirm&amp;authtypecode=<!-- TMPL_VAR NAME="authtypecode" escape="HTML" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/edittrash.png" width="32" hspace="0" vspace="0" border="0"></a></td>
		</tr>
	<!-- /TMPL_LOOP -->
</table>
<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
	<input type="hidden" name="op" value="add_form">
	<input type="submit" class="button" value="Add authority type" title="Add authority type" alt="Add authority type" >
	<td width="33%"><!-- TMPL_IF NAME="previous" --><a href="<!-- TMPL_VAR NAME="previous" -->"><input type="image" src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/1leftarrow.png" title="previous" alt="previous" border="0"></a><!-- /TMPL_IF --></td>
	<td width="33%"><!-- TMPL_IF NAME="next" --><a href="<!-- TMPL_VAR NAME="next" -->"><input type="image" src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/1rightarrow.png" title="next" alt="next" border="0"></a><!-- /TMPL_IF --></td>
</form>
</div>
<!-- /TMPL_IF -->
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
