<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->

<div id="mainbloc">
	<h1>Checking MARC setup</h1>
	<table>
		<tr>
			<th>Test</th>
			<th>Result</th>
		</tr>
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="itemnum" -->
		<tr>
			<td><b>itemnum</b></td>
			<td><li>The field itemnum MUST be mapped </li>
				<li>The correspounding subfield MUST be in with -1 (ignore) tab</td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>itemnum : the field itemnumber is mapped to a field in tab -1</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="itemfields" -->
		<tr>
			<td><b>item fields</b></td>
			<td>ALL items fields MUST :<br/>
				<li>be mapped to the same tag,</li>
				<li>and they must all be in the 10 (items) tab</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>All item fields are in the same tag and in item tab</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="itemtags" -->
		<tr>
			<td><b>Item tag</b></td>
			<td>There is more than 1 MARC tag related to items tab (10) : <!-- TMPL_VAR name="itemtags" --></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>Only 1 marc tag mapped to items</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="itemtypes_empty" -->
		<tr>
			<td><b>itemtypes table empty</b></td>
			<td>the itemtypes table is empty. It must contain at least 1 value</td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>itemtypes table filled with at least 1 value</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="itemtype" -->
		<tr>
			<td><b>itemtype NOT mapped</b></td>
			<td>the biblioitems.itemtype field MUST :<br/>
				<li>be mapped to a MARC subfield, </li>
				<li>the correspounding subfield MUST have authorised_value="itemtype"</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>biblioitems.itemtype defined</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="branches_empty" -->
		<tr>
			<td><b>branch table empty</b></td>
			<td>the branch table is empty. It must contain at least 1 value !</td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>branch table filled with at least 1 value</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="branch" -->
		<tr>
			<td><b>homebranch NOT mapped</b></td>
			<td>the items.homebranch field MUST :<br/>
				<li>be mapped to a MARC subfield,</li>
				<li>the correspounding subfield MUST have authorised value="branches"</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>homebranch defined</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="holdingbranch" -->
		<tr>
			<td><b>holdingbranch NOT mapped</b></td>
			<td>the items.holdingbranch field MUST :<br/>
				<li>be mapped to a MARC subfield, </li>
				<li>the correspounding subfield MUST have authorised value="branches"</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>holdingbranch defined</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="biblionumber" -->
		<tr>
			<td><b>biblio and biblionumber</b></td>
			<td>The biblio.biblionumber and biblioitems.biblioitemnumber fields MUST :<br/>
				<li>be mapped to a MARC subfield,</li>
				<li>be in the SAME tag (for example : 090$a and 090$b)</li>
				<li>be in tab -1</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>biblionumber and biblioitemnumber mapped correctly</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="frameworknull" -->
		<tr>
			<td><b>framework values</b></td>
			<td>there is a null value in a frameworkcode. Check the following tables<br/>
				<li>select * from marc_subfield_structure where frameworkcode is NULL</li>
				<li>select * from marc_tag_structure where frameworkcode is NULL</li>
				<li>select * from marc_biblio where frameworkcode is NULL</li></td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>OK</td>
			<td><i>no NULL value in frameworkcode</i></td>
		</tr>
	<!-- /TMPL_IF -->
	<!-- -------------------------------------------------------------------------------------------------------- -->
	<!-- TMPL_IF NAME="total" -->
		<tr>
			<td><b>TOTAL</b></td>
			<td>You have <b><!-- TMPL_VAR NAME="total" --></b> error(s) in your MARC configuration. Please fix them before using koha</td>
		</tr>
	<!-- TMPL_ELSE -->
		<tr>
			<td>&nbsp;</td>
			<td><b>Configuration OK, you don't have errors in your MARC parameters table</b></td>
		</tr>
	<!-- /TMPL_IF -->
	</table>
</div>
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
