<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->

<script>
	function _(s) { return s } // dummy function for gettext
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isNotNull(f,noalert) {
		if (f.value.length ==0) {
   return false;
		}
		return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function toUC(f) {
		var x=f.value.toUpperCase();
		f.value=x;
		return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isNum(v,maybenull) {
	var n = new Number(v.value);
	if (isNaN(n)) {
		return false;
		}
	if (maybenull==0 && v.value=='') {
		return false;
	}
	return true;
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function isDate(f) {
		var t = Date.parse(f.value);
		if (isNaN(t)) {
			return false;
		}
	}
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	function Check(f) {
		var ok=1;
		var _alertString="";
		var alertString2;
		if (f.tagfield.value.length==0) {
			_alertString += "\n- " + _("tag number missing");
		}
		if (_alertString.length==0) {
			document.Aform.submit();
		} else {
			alertString2  = _("Form not submitted because of the following problem(s)");
			alertString2 += "\n------------------------------------------------------------------------------------\n";
			alertString2 += _alertString;
			alert(alertString2);
		}
	}
	</SCRIPT>

<!-- TMPL_IF name="add_form" -->
<!---------------------------------------------------------------------------->
	<h1>
	<!-- TMPL_IF NAME="use-heading-flags-p" -->
	<!-- TMPL_IF NAME="heading-modify-tag-p" -->Modify tag<!-- /TMPL_IF -->
	<!-- TMPL_IF NAME="heading-add-tag-p" -->Add tag<!-- /TMPL_IF -->
	<!-- TMPL_ELSE --><!-- TMPL_VAR name="action" --><!-- /TMPL_IF -->
	</h1>
	<form action='<!-- TMPL_VAR name="script_name" -->' name="Aform" method="post">
	<input type=hidden name=op value='add_validate'>
	<table>
	<tr><td>Tag</td><td><!-- TMPL_VAR name="searchfield" --></td></tr>
	<tr><td>Lib for librarians</td><td><input type="text" name="liblibrarian" value='<!-- TMPL_VAR name="liblibrarian" escape=HTML -->' size=80 maxlength=100></td></tr>
	<tr><td>Lib for opac</td><td><input type="text" name="libopac" value='<!-- TMPL_VAR name="libopac" escape=HTML -->' size=80 maxlength=100></td></tr>
	<tr><td>Repeatable</td><td><!-- TMPL_VAR name="repeatable" --></td></tr>
	<tr><td>Mandatory</td><td><!-- TMPL_VAR name="mandatory" --></td></tr>
	<tr><td>Authorised value</td><td><!-- TMPL_VAR name="authorised_value" --> (if you select a value here, the indicators will be limited to the authorised value list)</td></tr>
	<tr><td>&nbsp;</td><td><INPUT type="button" value='OK' onClick='Check(this.form)'></td></tr>
	</table>
	</form>
<!-- /TMPL_IF -->


<!-- TMPL_IF name="delete_confirm" -->
<!---------------------------------------------------------------------------->
<table border=0 cellspacing=0 cellpadding=2>
	<tr valign=top bgcolor=#99cc33>
		<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>tag</b></td>
		<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b><!-- TMPL_VAR name="searchfield" --></b></td>
	</tr>
	<tr><td>&nbsp;</td><td><!-- TMPL_VAR name="liblibrarian" --></td></tr>
	<form action='<!-- TMPL_VAR name="script_name" -->' method=post><input type=hidden name=op value=delete_confirmed><input type=hidden name=searchfield value='<!-- TMPL_VAR name="searchfield" -->'>
	<tr><td colspan=2 align=center>CONFIRM DELETION</td></tr>
	<tr><td><INPUT type=submit value='YES'></form></td><td><form action='<!-- TMPL_VAR name="script_name" -->' method=post><input type=submit value=NO></form></td></tr>
<!-- /TMPL_IF -->

<!-- TMPL_IF name="delete_confirmed" -->
<!---------------------------------------------------------------------------->
	Data deleted
	<form action='<!-- TMPL_VAR name="script_name" -->' method=post>
	<input type=submit value=OK>
	</form>
<!-- /TMPL_IF -->

<!---------------------------------------------------------------------------->
<!-- TMPL_IF name="else" -->
<h1>MARC tag structure admin</h1>
<b>NOTE : if you change the link between a MARC subfield and a non-MARC field, ask your administrator to run misc/rebuildnonmarc.pl script.</b>
<form action='<!-- TMPL_VAR name="script_name" -->' method=post>
	<input type=text name=searchfield value="">
	<input type=reset name=reset value="clr">
</form>
<!-- TMPL_VAR name="searchfield" -->
<table border=0 cellspacing=0 cellpadding=2>
<tr valign=top bgcolor=#99cc33>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Tag</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Lib</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Repeatable</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Mandatory</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Authorised<br />value</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif"><b>Subfields</b></td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif">Edit</td>
	<td background="<!-- TMPL_VAR name="themelang" -->/images/background-mem.gif">Delete</td>
<!-- TMPL_LOOP name="loop" -->
<tr valign=top bgcolor='<!-- TMPL_VAR name="bgcolor" -->'>
	<td><b><!-- TMPL_VAR name="tagfield" --></b></td>
	<td><!-- TMPL_VAR name="liblibrarian" --></td>
	<td><!-- TMPL_IF name="repeatable" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
	<td><!-- TMPL_IF name="mandatory" -->Yes<!-- TMPL_ELSE -->No<!-- /TMPL_IF --></td>
	<td><!-- TMPL_VAR name="authorised_value" --></td>
	<td><a href="<!-- TMPL_VAR name="subfield_link" -->">subfields</a></td>
	<td><a href="<!-- TMPL_VAR name="edit" -->"><img src="<!-- TMPL_VAR name="interface" -->/<!-- TMPL_VAR name="theme" -->/images/fileopen.png"  width=32 hspace=0 vspace=0 border=0></a></td>
	<td><a href="<!-- TMPL_VAR name="delete" -->"><img src="<!-- TMPL_VAR name="interface" -->/<!-- TMPL_VAR name="theme" -->/images/edittrash.png" width=32 hspace=0 vspace=0 border=0></a></td>
</tr>
<!-- /TMPL_LOOP -->
<form action='<!-- TMPL_VAR name="script_name" -->' method=post>
<input type=hidden name=op value=add_form>
</table>
	<form action='<!-- TMPL_VAR name="script_name" -->' method=post>
	<input type=hidden name=op value=add_form>
<table width=40%>
	<tr>
		<td width="33%">
			<input type=submit class="button" value="Add Tag" title="Add Tag" alt="Add Tag" >
		</td>
		<td width=33%>
			<!-- TMPL_IF name="isprevpage" -->
				<a href="<!-- TMPL_VAR name="script_name" -->?offset=<!-- TMPL_VAR name="prevpage" -->&searchfield=<!-- TMPL_VAR name="searchfield" -->">
				<input type=image src="<!-- TMPL_VAR name="interface" -->/<!-- TMPL_VAR name="theme" -->/images/1leftarrow.png" title="previous" ALT="previous" BORDER=0>
				</a>
			<!-- /TMPL_IF -->
		</td>
		<td width=33%>
			<!-- TMPL_IF name="nextpage" -->
				<a href="<!-- TMPL_VAR name="script_name" -->?offset=<!-- TMPL_VAR name="nextpage" -->&searchfield=<!-- TMPL_VAR name="searchfield" -->">
					<input type=image src="<!-- TMPL_VAR name="interface" -->/<!-- TMPL_VAR name="theme" -->/images/1rightarrow.png" title="next" ALT="next" BORDER=0>
				</a>
			<!-- /TMPL_IF -->
		</td>
	</tr>
</table>
</form>
<!-- /TMPL_IF -->
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
