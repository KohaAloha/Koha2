<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->
<div id="mainbloc">
	<!-- TMPL_IF NAME="add_form" -->
		<script language="javascript" type="text/javascript">
			function _(s) { return s } // dummy function for gettext
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNotNull(f,noalert) {
					if (f.value.length ==0) {
						return false;
					}
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function toUC(f) {
					var x=f.value.toUpperCase();
					f.value=x;
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNum(v,maybenull) {
			var n = new Number(v.value);
			if (isNaN(n)) {
					return false;
					}
			if (maybenull==0 && v.value=='') {
					return false;
			}
			return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isDate(f) {
					var t = Date.parse(f.value);
					if (isNaN(t)) {
						return false;                       
					}
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function Check(f) {
					var ok=1;
					var _alertString="";
					var alertString2;
					if (f.searchfield.value.length==0) {
							_alertString += "\n- " + _("site name missing");
					}
					if (f.host.value.length==0) {
							_alertString += "\n- " + _("host missing");
					}
					if (f.port.value.length==0) {
							_alertString += "\n- " + _("port missing");
					}
					if (f.db.value.length==0) {
							_alertString += "\n- " + _("database missing");
					}
					if (isNaN(f.port.value)) {
							_alertString += "\n- " + _("port must be a number");
					}
					if (isNaN(f.rank.value)) {
							_alertString += "\n- " + _("rank must be a number");
					}
					if (isNaN(f.checked.value) || f.checked.value<0 || f.checked.value>1) {
							_alertString += "\n- " + _("checked must be 0 or 1");
					}
					if (_alertString.length==0) {
							document.Aform.submit();
					} else {
							alertString2  = _("Form not submitted because of the following problem(s)");
							alertString2 += "\n------------------------------------------------------------------------------------\n";
							alertString2 += _alertString;
							alert(alertString2);
					}
			}
		</script>
		<!-- TMPL_IF NAME="searchfield" -->
				<h1>Modify Z39.50 Server</h1>
		<!-- TMPL_ELSE -->
				<h1>Add Z39.50 server</h1>
		<!-- /TMPL_IF -->
		<form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
			<input type="hidden" name="op" value="add_validate">
			<!-- TMPL_IF NAME="searchfield" -->
				<p>
					<label class="label100">Z39.50 Server</label>
					<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->"><!-- TMPL_VAR NAME="searchfield" -->
				</p>
			<!-- TMPL_ELSE -->
				<p>
					<label class="label100">Z39.50 Server</label>
					<input type="text" name="searchfield" size="100" maxlength="100" onblur="toUC(this)">
				</p>
			<!-- /TMPL_IF -->
			<p>
				<label class="label100">Hostname</label>
				<input type="text" name="host" size="30" value="<!-- TMPL_VAR NAME="host" -->">
			</p>
			<p>
				<label class="label100">Port</label>
				<input type="text" name="port" size="5" value="<!-- TMPL_VAR NAME="port" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Database</label>
				<input type="text" name="db" value="<!-- TMPL_VAR NAME="db" -->">
			</p>
			<p>
				<label class="label100">Userid</label>
				<input type="text" name="userid" value="<!-- TMPL_VAR NAME="userid" -->">
			</p>
			<p>
				<label class="label100">Password</label>
				<input type="text" name="password" value="<!-- TMPL_VAR NAME="password" -->">
			</p>
			<p>
				<label class="label100">Checked (searched by default)</label>
				<input type="text" size="1" name="checked" value="<!-- TMPL_VAR NAME="checked" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Rank (display order)</label>
				<input type="text" name="rank" size="4" value="<!-- TMPL_VAR NAME="rank" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Syntax (z3950 can send records in various format. Choose one)</label>
				<select name="syntax">
					<option value="MARC21">MARC21</option>
					<option value="UNIMARC">UNIMARC</option>
				</select>
			</p>
			<input type="button" value="OK" onclick="Check(this.form)" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="add_validate" -->
		Data recorded
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="submit" value="OK" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="delete_confirm" -->
		<!-- TMPL_VAR NAME="reqsel" -->
			<table>
			<tr>
				<th>Site</th>
				<th><!-- TMPL_VAR NAME="searchfield" --></th>
			</tr>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="hidden" name="op" value="delete_confirmed">
				<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->">
			<tr>
				<td>Hostname</td>
				<td><!-- TMPL_VAR NAME="host" --></td>
			</tr>
			<tr>
				<td>Port</td>
				<td><!-- TMPL_VAR NAME="port" --></td>
			</tr>
			<tr>
				<td>Database</td>
				<td><!-- TMPL_VAR NAME="db" --></td>
			</tr>
			<tr>
				<td>Userid</td>
				<td><!-- TMPL_VAR NAME="userid" --></td>
			</tr>
			<tr>
				<td>Password</td>
				<td><!-- TMPL_VAR NAME="password" --></td>
			</tr>
			<tr>
				<td>Checked</td>
				<td><!-- TMPL_VAR NAME="checked" --></td>
			</tr>
			<tr>
				<td>Rank</td>
				<td><!-- TMPL_VAR NAME="rank" --></td>
			</tr>
			<tr>
				<td colspan="2" align="center">CONFIRM DELETION</td>
			</tr>
			<tr>
				<td><input type="submit" value="YES"></form></td>
				<td><form action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" value="NO"></form></td>
			</tr>
		</table>
	<!-- /TMPL_IF -->

	<!-- TMPL_IF NAME="delete_confirmed" -->
			Data deleted
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
					<input type="submit" value="OK">
			</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="else" -->
			<h1 class="parameters">Z39.50 Servers admin</h1>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="text" name="description" value="<!-- TMPL_VAR NAME="searchfield" -->">
				<input type="submit" name="ok" value="OK" class="button">
			</form>
			<!-- TMPL_IF NAME="searchfield" -->
				You searched for <b><!-- TMPL_VAR NAME="searchfield" --></b>
			<!-- /TMPL_IF -->
			<table>
				<tr>
					<th>Site</th>
					<th>Hostname</th>
					<th>Port</th>
					<th>Database</th>
					<th>Userid</th>
					<th>Password</th>
					<th>Checked</th>
					<th>Rank</th>
					<th>Syntax</th>
					<th> </td>
					<th> </td>
				</tr>
				<!-- TMPL_LOOP NAME="loop" -->
				<tr bgcolor="<!-- TMPL_VAR NAME="toggle" -->">
					<td><!-- TMPL_VAR NAME="name" --></td>
					<td><!-- TMPL_VAR NAME="host" --></td>
					<td><!-- TMPL_VAR NAME="port" --></td>
					<td><!-- TMPL_VAR NAME="db" --></td>
					<td><!-- TMPL_VAR NAME="userid" --></td>
					<td><!-- TMPL_VAR NAME="password" --></td>
					<td><!-- TMPL_VAR NAME="checked" --></td>
					<td><!-- TMPL_VAR NAME="rank" --></td>
					<td><!-- TMPL_VAR NAME="syntax" --></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=add_form&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/fileopen.png" alt="Edit" title="edit" border="0" ></a></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=delete_confirm&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/edittrash.png" alt="Delete" title="delete" border="0" ></a></td>
				</tr>
				<!-- /TMPL_LOOP -->
		</table>
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="hidden" name="op" value="add_form">
			<!-- TMPL_IF NAME="offsetgtzero" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="prevpage" -->" class="button">&lt;&lt; Prev</a>
			<!-- /TMPL_IF -->
			<!-- TMPL_IF NAME="ltcount" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="nextpage" -->" class="button">Next &gt;&gt;</a>
			<!-- /TMPL_iF -->
			<input type="submit" class="button" alt="Add Z39.50 server" value="Add Z39.50 server">
		</form>
	
	<!-- /TMPL_IF -->
</div>
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
