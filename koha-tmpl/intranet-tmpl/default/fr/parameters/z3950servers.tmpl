<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->
<div id="mainbloc">
	<!-- TMPL_IF NAME="add_form" -->
		<script language="javascript" type="text/javascript">
			function _(s) { return s } // dummy function for gettext
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNotNull(f,noalert) {
					if (f.value.length ==0) {
						return false;
					}
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function toUC(f) {
					var x=f.value.toUpperCase();
					f.value=x;
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNum(v,maybenull) {
			var n = new Number(v.value);
			if (isNaN(n)) {
					return false;
					}
			if (maybenull==0 && v.value=='') {
					return false;
			}
			return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isDate(f) {
					var t = Date.parse(f.value);
					if (isNaN(t)) {
						return false;                       
					}
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function Check(f) {
					var ok=1;
					var _alertString="";
					var alertString2;
					if (f.searchfield.value.length==0) {
							_alertString += "\n- " + _("Nom de site absent");
					}
					if (f.host.value.length==0) {
							_alertString += "\n- " + _("serveur manquant");
					}
					if (f.port.value.length==0) {
							_alertString += "\n- " + _("Port absent");
					}
					if (f.db.value.length==0) {
							_alertString += "\n- " + _("base de données absente");
					}
					if (isNaN(f.port.value)) {
							_alertString += "\n- " + _("port doit être un nombre");
					}
					if (isNaN(f.rank.value)) {
							_alertString += "\n- " + _("le rang doit être numérique");
					}
					if (isNaN(f.checked.value) || f.checked.value<0 || f.checked.value>1) {
							_alertString += "\n- " + _("contrôlé doit être à 0 ou 1");
					}
					if (_alertString.length==0) {
							document.Aform.submit();
					} else {
							alertString2  = _("Formulaire non soumis à cause du (des) problème(s) suivant(s)");
							alertString2 += "\n------------------------------------------------------------------------------------\n";
							alertString2 += _alertString;
							alert(alertString2);
					}
			}
		</script>
		<!-- TMPL_IF NAME="searchfield" -->
				<h1>Modifier un Serveur Z39.50</h1>
		<!-- TMPL_ELSE -->
				<h1>Ajouter un serveur Z39.50</h1>
		<!-- /TMPL_IF -->
		<form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
			<input type="hidden" name="op" value="add_validate">
			<!-- TMPL_IF NAME="searchfield" -->
				<p>
					<label class="label100">Serveur Z39.50</label>
					<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->"><!-- TMPL_VAR NAME="searchfield" -->
				</p>
			<!-- TMPL_ELSE -->
				<p>
					<label class="label100">Serveur Z39.50</label>
					<input type="text" name="searchfield" size="100" maxlength="100" onblur="toUC(this)">
				</p>
			<!-- /TMPL_IF -->
			<p>
				<label class="label100">Nom du serveur hôte</label>
				<input type="text" name="host" size="30" value="<!-- TMPL_VAR NAME="host" -->">
			</p>
			<p>
				<label class="label100">Port</label>
				<input type="text" name="port" size="5" value="<!-- TMPL_VAR NAME="port" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Base de données</label>
				<input type="text" name="db" value="<!-- TMPL_VAR NAME="db" -->">
			</p>
			<p>
				<label class="label100">Identifiant Utilisateur</label>
				<input type="text" name="userid" value="<!-- TMPL_VAR NAME="userid" -->">
			</p>
			<p>
				<label class="label100">Mot de passe</label>
				<input type="text" name="password" value="<!-- TMPL_VAR NAME="password" -->">
			</p>
			<p>
				<label class="label100">Contrôlé (recherché par défaut)</label>
				<input type="text" size="1" name="checked" value="<!-- TMPL_VAR NAME="checked" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Rang (Ordre d'affichage)</label>
				<input type="text" name="rank" size="4" value="<!-- TMPL_VAR NAME="rank" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Syntaxe (le serveur Z3950 peut envoyer les enregistrements selon divers formats. Choisissez en un)</label>
				<select name="syntax">
					<option value="MARC21">MARC21</option>
					<option value="UNIMARC">UNIMARC</option>
				</select>
			</p>
			<input type="button" value="OK" onclick="Check(this.form)" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="add_validate" -->
		Donnée enregistrée
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="submit" value="OK" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="delete_confirm" -->
		<!-- TMPL_VAR NAME="reqsel" -->
			<table>
			<tr>
				<th>Site</th>
				<th><!-- TMPL_VAR NAME="searchfield" --></th>
			</tr>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="hidden" name="op" value="delete_confirmed">
				<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->">
			<tr>
				<td>Nom du serveur hôte</td>
				<td><!-- TMPL_VAR NAME="host" --></td>
			</tr>
			<tr>
				<td>Port</td>
				<td><!-- TMPL_VAR NAME="port" --></td>
			</tr>
			<tr>
				<td>Base de données</td>
				<td><!-- TMPL_VAR NAME="db" --></td>
			</tr>
			<tr>
				<td>Identifiant Utilisateur</td>
				<td><!-- TMPL_VAR NAME="userid" --></td>
			</tr>
			<tr>
				<td>Mot de passe</td>
				<td><!-- TMPL_VAR NAME="password" --></td>
			</tr>
			<tr>
				<td>Contrôle</td>
				<td><!-- TMPL_VAR NAME="checked" --></td>
			</tr>
			<tr>
				<td>Rang</td>
				<td><!-- TMPL_VAR NAME="rank" --></td>
			</tr>
			<tr>
				<td colspan="2" align="center">CONFIRMEZ SUPPRESSION</td>
			</tr>
			<tr>
				<td><input type="submit" value="OUI"></form></td>
				<td><form action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" value="NON"></form></td>
			</tr>
		</table>
	<!-- /TMPL_IF -->

	<!-- TMPL_IF NAME="delete_confirmed" -->
			Donnée détruite
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
					<input type="submit" value="OK">
			</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="else" -->
			<h1 class="parameters">Gestion des serveurs Z39.50</h1>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="text" name="description" value="<!-- TMPL_VAR NAME="searchfield" -->">
				<input type="submit" name="ok" value="OK" class="button">
			</form>
			<!-- TMPL_IF NAME="searchfield" -->
				Vous recherchiez <b><!-- TMPL_VAR NAME="searchfield" --></b>
			<!-- /TMPL_IF -->
			<table>
				<tr>
					<th>Site</th>
					<th>Nom du serveur hôte</th>
					<th>Port</th>
					<th>Base de données</th>
					<th>Identifiant Utilisateur</th>
					<th>Mot de passe</th>
					<th>Contrôle</th>
					<th>Rang</th>
					<th>Syntaxe</th>
					<th> </td>
					<th> </td>
				</tr>
				<!-- TMPL_LOOP NAME="loop" -->
				<tr bgcolor="<!-- TMPL_VAR NAME="toggle" -->">
					<td><!-- TMPL_VAR NAME="name" --></td>
					<td><!-- TMPL_VAR NAME="host" --></td>
					<td><!-- TMPL_VAR NAME="port" --></td>
					<td><!-- TMPL_VAR NAME="db" --></td>
					<td><!-- TMPL_VAR NAME="userid" --></td>
					<td><!-- TMPL_VAR NAME="password" --></td>
					<td><!-- TMPL_VAR NAME="checked" --></td>
					<td><!-- TMPL_VAR NAME="rank" --></td>
					<td><!-- TMPL_VAR NAME="syntax" --></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=add_form&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/fileopen.png" alt="Editer" title="Ouvrir" border="0"></a></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=delete_confirm&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/edittrash.png" alt="Supprimer" title="supprimer" border="0"></a></td>
				</tr>
				<!-- /TMPL_LOOP -->
		</table>
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="hidden" name="op" value="add_form">
			<!-- TMPL_IF NAME="offsetgtzero" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="prevpage" -->" class="button"><< Préc.</a>
			<!-- /TMPL_IF -->
			<!-- TMPL_IF NAME="ltcount" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="nextpage" -->" class="button">Suivant >></a>
			<!-- /TMPL_iF -->
			<input type="submit" class="button" alt="Ajouter un serveur Z39.50" value="Ajouter un serveur Z39.50">
		</form>
	
	<!-- /TMPL_IF -->
</div>
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
