<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->Koha -- System Administration: 
<!-- TMPL_IF name="add_form" --><!-- TMPL_IF name="itemtype" -->Modify item type '<!-- TMPL_VAR name="itemtype" -->'<!-- TMPL_ELSE -->Add item type<!-- /TMPL_IF --><!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirm" --><!-- TMPL_IF name="total" -->Cannot Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'<!-- TMPL_ELSE -->Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'?<!-- /TMPL_IF --><!-- /TMPL_IF -->
<!-- TMPL_IF name="delete_confirmed" -->Data Deleted<!-- /TMPL_IF -->
<!-- TMPL_IF name="else" -->Item Types Administration<!-- /TMPL_IF -->
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<!-- TMPL_INCLUDE NAME="masthead.inc" -->
<!-- TMPL_INCLUDE NAME="admin-topmenu.inc" -->
<!-- TMPL_INCLUDE NAME="intranet-nav.inc" -->

<div id="main">
<!-- TMPL_IF name="add_form" -->

	<form action="<!-- TMPL_VAR name="script_name" -->" name="Aform" method="post">
		<input type="hidden" name="op" value="add_validate" />
		<input type="hidden" name="checked" value="0" />
		<div class="data">
		<table>
		<caption><!-- TMPL_IF name="itemtype" -->
		Modify item type
	<!-- TMPL_ELSE -->
		Add item type
	<!-- /TMPL_IF --></caption>
			<!-- TMPL_IF name="itemtype" -->
				<tr><th><label for="">Item type</label></th><td><input type="hidden" name="itemtype" value="<!-- TMPL_VAR name="itemtype" -->" /><!-- TMPL_VAR name="itemtype" --></td></tr>
			<!-- TMPL_ELSE -->
				<tr><th><label for="">Item type</label></th><td><input type="text" name="itemtype" size="6" maxlength="4" onblur="toUC(this)" /></td></tr>
			<!-- /TMPL_IF -->
			<tr>
				<th><label for="description">Description</label></th>
				<td><input type="text" id="description" name="description" size="48" maxlength="80" value="<!-- TMPL_VAR name="description" escape="HTML" -->" />&nbsp;</td>
			</tr>
			<tr>
				<th><label for="notforloan">Not for loan</label></th>
				<td><input type="checkbox" id="notforloan" name="notforloan"<!-- TMPL_IF name="notforloan" --> checked="checked"<!-- /TMPL_IF --> value="1"> (if checked, no item of this type can be issued. If not checked, every item of this type can be issued unless notforloan is set for a specific item)</td>
			</tr>
			<tr>
			<tr>
				<th><label for="renewalsallowed">Renewals</label></th>
				<td><input type="text" id="renewalsallowed" name="renewalsallowed" size="3" maxlength="3" value="<!-- TMPL_IF name="renewalsallowed" --><!-- TMPL_VAR NAME="renewalsallowed" --><!-- /TMPL_IF -->" value="1" /><!-- Display for NPL <input type="hidden" name="rentalcharge" value="0" /> /Display for NPL --></td>
			</tr>
<!-- Hide from NPL--> 			<tr>
				<th><label for="rentalcharge">Rental charge</label></th>
				<td><input type="text" id="rentalcharge" name="rentalcharge" size="10" value="<!-- TMPL_VAR name="rentalcharge" -->" /></td>
			</tr><!--  /Hide from NPL -->
		</table><input type="button" value="Save Changes" onclick="Check(this.form)" class="submit" /> <input type="button" class="cancel" value="Cancel" onclick="history.back();" />
	</form>
<!-- /TMPL_IF -->

<!-- TMPL_IF name="delete_confirm" -->
<!-- TMPL_IF name="total" --><div class="error">This record is used <!-- TMPL_VAR name="total" --> times. Deletion is not possible.</div><!-- /TMPL_IF -->
<div class="table details">	<table>
	<caption><!-- TMPL_IF name="total" -->Cannot Delete Item Type<!-- TMPL_ELSE -->Delete Item Type '<!-- TMPL_VAR name="itemtype" -->'?<!-- /TMPL_IF --></caption>
		<tr>
			<th>Item type</th>
			<td><!-- TMPL_VAR name="itemtype" --></td>
		</tr>

	<tr><th>Description</th><td><!-- TMPL_VAR name="description" --></td></tr>
	<tr><th>Loan length</th><td><!-- TMPL_VAR name="loanlength" --></td></tr>
	<tr><th>Renewals</th><td><!-- TMPL_IF name="renewalsallowed" -->Allowed<!-- TMPL_ELSE -->Not allowed<!-- /TMPL_IF --></td></tr>
<!-- Hide from NPL --><tr><th>Rental charge</th><td><!-- TMPL_VAR name="rentalcharge" --></td></tr><!-- /Hide from NPL --></table></div>
		<div class="tabitem"><form action="<!-- TMPL_VAR name="script_name" -->" method="post">
		<input type="hidden" name="op" value="delete_confirmed" /><input type="hidden" name="itemtype" value="<!-- TMPL_VAR name="itemtype" -->" /><!-- TMPL_IF name="total" -->
		</form><form action="<!-- TMPL_VAR name="script_name" -->" method="post"><input type="submit" value="OK" class="submit" /></form>
	<!-- TMPL_ELSE -->
		<input type="submit" value="Delete this Item Type" class="cancel" /></form> <form action="<!-- TMPL_VAR name="script_name" -->" method="post"><input type="submit" value="Do Not Delete" class="submit" /></form>
	<!-- /TMPL_IF --></div>

	
<!-- /TMPL_IF -->

<!-- TMPL_IF name="else" -->
<table>
<caption>Item Types Administration</caption>
	<tr>
		<th>Code</th>
		<th>Description</th>
		<th>Not for Loan</th>
		<th>Renewable</th>
		<th>Charge</th>
		<th>Edit</th>
		<th>Delete</th>
	</tr>
	<!-- TMPL_LOOP name="loop" -->
		<!-- TMPL_IF NAME="toggle" --><tr><!-- TMPL_ELSE --><tr class="highlight"><!-- /TMPL_IF -->
			<td><a href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->"><!-- TMPL_VAR name="itemtype" --></a></td>
			<td><!-- TMPL_VAR name="description" --></td>
			<td><!-- TMPL_IF NAME="notforloan" -->Yes<!-- TMPL_ELSE -->&nbsp;<!-- /TMPL_IF --></td>
			<td><!-- TMPL_UNLESS name="notforloan" -->
					<!-- TMPL_IF NAME="renewalsallowed" -->
						<!-- TMPL_VAR name="renewalsallowed" --> time(s)
					<!-- TMPL_ELSE -->
						No
					<!-- /TMPL_IF -->
				<!-- /TMPL_UNLESS -->
			</td>
		<td><!-- TMPL_UNLESS name="notforloan" --><!-- TMPL_VAR NAME="rentalcharge" --><!-- /TMPL_UNLESS --></td>
			<td><a class="edit" href="<!-- TMPL_VAR name="script_name" -->?op=add_form&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->">Edit</a></td>
			<td><a class="delete" href="<!-- TMPL_VAR name="script_name" -->?op=delete_confirm&amp;itemtype=<!-- TMPL_VAR name="itemtype" escape="HTML" -->">Delete</a></td>
		</tr>
	<!-- /TMPL_LOOP -->
</table>

<form action="<!-- TMPL_VAR name="script_name" -->" method="post">
<p><input type="hidden" name="op" value="add_form" />

<!-- TMPL_IF name="previous" --><input type="button" class="submit" onclick="location.href='<!-- TMPL_VAR name="previous" -->'; return false;" value="&lt;&lt; Previous Page" /><!-- /TMPL_IF -->

<input type="submit" value="Add Item Type" class="submit" />

<!-- TMPL_IF name="next" --><input type="button" class="submit" onclick="location.href='<!-- TMPL_VAR name="next" -->'; return false;" value="Next Page &gt;&gt;" /><!-- /TMPL_IF -->
</p></form>
<!-- /TMPL_IF -->

</div>
<script language="javascript" type="text/javascript">
function _(s) { return s } // dummy function for gettext

function isNotNull(f,noalert) {
	if (f.value.length ==0) {
		return false;
	}
	return true;
}

function toUC(f) {
	var x=f.value.toUpperCase();
	f.value=x;
	return true;
}

function isNum(v,maybenull) {
var n = new Number(v.value);
if (isNaN(n)) {
	return false;
	}
if (maybenull==0 && v.value=='') {
	return false;
}
return true;
}

function isDate(f) {
	var t = Date.parse(f.value);
	if (isNaN(t)) {
		return false;
	}
}

function Check(f) {
	var ok=1;
	var _alertString="";
	var alertString2;
	if (f.itemtype.value.length==0) {
		_alertString += "\n- " + _("Itemtype missing");
	}
	if (!(isNotNull(window.document.Aform.description,1))) {
		_alertString += "\n- " + _("Description missing");
	}
	if ((!isNum(f.rentalcharge,0)) && f.rentalcharge.value.length > 0) {
		_alertString += "\n- " + _("Rental charge is not a number");
	}
	if (_alertString.length==0) {
		document.Aform.submit();
	} else {
		alertString2  = _("Form not submitted because of the following problem(s)");
		alertString2 += "\n------------------------------------------------------------------------------------\n";
		alertString2 += _alertString;
		alert(alertString2);
	}
}
</script>
<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
